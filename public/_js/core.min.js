angular.module("public",["common","ngRoute","ngTemplates","pascalprecht.translate","app.i18n","ngNotify","cfp.loadingBar","ngAnimate"]).config(["$translateProvider",function(e){e.useSanitizeValueStrategy(null).useStaticFilesLoader({prefix:"",suffix:".json"}).useLoaderCache("$translationCache").preferredLanguage("en")}]).config(["$locationProvider",function(e){e.html5Mode(!0)}]).config(["$httpProvider",function(e){e.defaults.headers.common["Content-Type"]="application/json",e.interceptors.push("httpInterceptorPublic")}]).run(["$rootScope",function(e){e.appName="Framework"}]),angular.module("private",["common","ngRoute","ngTemplates","ngTable","chart.js","ngTagsInput","cfp.loadingBar","ngNotify","angularPromiseButtons","angularModalService","pascalprecht.translate","ngPrettyJson","color.picker","app.i18n","720kb.datepicker","angularMoment","ngAnimate","angularUtils.directives.dirPagination","ngSanitize","ngCsv"]).config(["$routeProvider",function(e){e.otherwise({redirectTo:"/404"})}]).config(["cfpLoadingBarProvider",function(e){e.includeSpinner=!1}]).config(["$translateProvider",function(e){e.useSanitizeValueStrategy(null).useStaticFilesLoader({prefix:"",suffix:".json"}).useLoaderCache("$translationCache").preferredLanguage("en")}]).config(["$httpProvider",function(e){e.defaults.headers.common["Content-Type"]="application/json",e.interceptors.push("httpInterceptorPrivate")}]).config(["$compileProvider",function(e){e.debugInfoEnabled(!1)}]).run(["$rootScope",function(e){e.appName="Framework"}]),angular.module("common",[]),function(e){try{e=angular.module("app.i18n")}catch(t){e=angular.module("app.i18n",[])}e.run(["$translationCache",function(e){e.put("en.json",'{"COMMON":{"CLASSIFER":"Classifier","IMPORT":"Import","SAVE":"Save","CANCEL":"Cancel","CONFIRM":"Confirm","DELETE":"Delete","CREATE":"Create","UPDATE":"Update"},"LOGIN":{"HEADER":"Filament Chatbot Engine","SUBHEADER":"Login","FORGOTTENPASSWORD":"Forgotten your password?","RESETIT":"Reset it.","FORM":{"EMAIL":"Email address","EMAIL_ERROR":"Please enter a valid email","PASSWORD":"Password","PASSWORD_ERROR":"Please enter a valid password","LOGIN":"Login"}},"PASSWORD":{"HEADER":"Email Confirmation","EMAIL_SENT":"Please check your email.","FORM":{"EMAIL":"Email address","EMAIL_ERROR":"Email address can not be empty","RESET":"Reset password"}},"REGISTER":{"SUBHEADER":"Registration","FORM":{"REGISTER":"Register"}},"CARD_LIST":{"ADD_NEW":"Add a new "},"MODALS":{"DELETE_CONFIRMATION":"Delete Confirmation","REMOVE_ITEM":"Are you sure you want to remove this item?"},"NAV":{"ACCOUNT":"Account","SUBMIT_TICKET":"Submit ticket","LOGOUT":"Logout","APPLICATION":"Workspace","REPORTS":"Overview","CONVERSATIONS":"Conversations","CONSOLE":"Chat Console","STUDIO":"Connector Studio","QUESTIONS":"Analytics","SETTINGS":"Settings","FLAGGED":"Flagged Messages"},"LANDING":{"HEADER":"Analytic Reports","SUBHEADER":"View reports for your chatbot","OVERVIEW":"Overview","LOGS":"Logs","ACCURACY":"Accuracy","TOTAL_CALLS":"Total Calls","NO_QUERIES":"You have not made any queries yet.","BETWEEN":"Between","FROM_DATE":"From date:","TO_DATE":"To date:","TOTAL_CONVERSATIONS":"Conversations completed","TOTAL_MESSAGES":"Messages recieved","TOTAL_CORRECT":"Messages answered","TOTAL_INCORRECT":"Messages unanswered","QUERIES_CHANNEL":"Session by Channel","QUERIES_CHANNEL_SUBLINE":"Breakdown of sessions by channel","QUERIES_INTENT":"Messages by Top 5 Intents","QUERIES_INTENT_SUBLINE":"Breakdown of messages by the most popular intents","QUERIES_EMOTION":"Messages by Emotion","QUERIES_EMOTION_SUBLINE":"Breakdown of message by emotion","QUERIES_OVERTIME":"Conversations Overtime","QUERIES_OVERTIME_SUBLINE":"Conversation show overtime","QUERIES":"Latest Queries","QUERIES_SUBLINE":"List of the lastest messages recieved","CONVERSATIONS":"Conversations","CONVERSATIONS_SUBLINE":"Conversations by date","NO_CONVERSATIONS":"No conversations found.","FLAGGED":"Flagged Messages","FLAGGED_SUBHEADER":"Messages containing the flagged keywords"},"QUESTIONS":{"QUESTION_ONE":"Difficulty sleeping","QUESTION_ONE_SUBLINE":"Have you had any difficulty sleeping during the last month, specifically because of your asthma?","QUESTION_TWO":"Symptoms","QUESTION_TWO_SUBLINE":"Have you had any difficulty sleeping during the last month, specifically because of your asthma?","QUESTION_THREE":"Second Symptoms","QUESTION_THREE_SUBLINE":"Have you also experienced any of the other symptoms?","QUESTION_FOUR":"Activites","QUESTION_FOUR_SUBLINE":"In the past month has asthma interfered with your usual activities?","QUESTION_FIVE":"Second Activites","QUESTION_FIVE_SUBLINE":"Has your asthma impacted any of the other activities?","QUESTION_SIX":"Downloads","QUESTION_SIX_SUBLINE":"Download type","QUESTION_SEVEN":"See A Doctor","QUESTION_SEVEN_SUBLINE":"I really hope that you feel prepared to go and seek more advice from your doctor?","QUESTION_EIGHT":"Useful","QUESTION_EIGHT_SUBLINE":"Have you had any difficulty sleeping during the last month, specifically because of your asthma?","QUESTION_NINE":"Downloads","QUESTION_NINE_SUBLINE":"Have you had any difficulty sleeping during the last month, specifically because of your asthma?","REASONS":"Free text answers","REASONS_SUBLINE":"List of all free text answers"},"SETTINGS":{"HEADER":"Settings","SUBHEADER":"Configure your bot","NAME":"Bot Name","NAME_INFO":"This will be displayed on the web widget","NAME_PLACEHOLDER":"e.g Qbot..","NAME_ERROR":"Bot name can not be blank","COLOR":"Brand Colour","COLOR_INFO":"Colour of the chat bubbles","COLOR_ERROR":"Colour can not be blank","FONT":"Font Colour","FONT_INFO":"Font colour of the chat bubbles","FONT_ERROR":"Font colour can not be blank","AVATAR":"Avatar Url","AVATAR_INFO":"avatar icon url (https)","AVATAR_ERROR":"Avatar can not be blank","INTRODUCTION":"Welcome Message","INTRODUCTION_INFO":"This will be shown on the welcome screen","INTRODUCTION_ERROR":"Introduction can not be empty","MENU":"Persistent Menu","MENU_INFO":"Add upto 5 options in the presistent menu","TITLE":"Title","URL":"Url"}}')}])}(),angular.module("ngTemplates",[]).run(["$templateCache",function(e){e.put("/partials/404.html",'<div style="text-align:center">\n  <h1>404</h1>\n  <h2>Page not found...</h2>\n  <img src="/android-chrome-384x384.png" alt="logo">\n</div>\n'),e.put("/partials/public/landing/landing.html",""),e.put("/partials/public/auth/login.html",'<div id="canvas-background" class="canvas-background">\n\t<canvas id="demo-canvas"></canvas>\n</div>\n<div class="centre-screen">\n\t<div class="container">\n\t\t<form name="loginForm" class="boxed" role="form" method="POST" ng-submit="login(loginForm.$valid,user)" novalidate>\n\t\t\t<h1>{{appName}} {{\'LOGIN.SUBHEADER\' | translate}}</h1>\n\t\t\t<p>{{\'LOGIN.FORGOTTENPASSWORD\' | translate}} <a href="/#/passwordreset">{{\'LOGIN.RESETIT\' | translate}}</a></p>\n\t\t\t<ul ng-show="errors" class="alert alert-error"><li ng-repeat="error in errors">{{error}}</li></ul>\n\t\t\t<div class="form-group">\n\t\t\t\t<label><span>{{\'LOGIN.FORM.EMAIL\' | translate}} </span>\n\t\t\t\t\t<span class="field-required" ng-show="loginForm.email.$pristine">*</span>\n\t\t\t\t\t<span class="field-valid"  ng-show="loginForm.email.$dirty && loginForm.email.$valid"><i class="ion-checkmark-circled success"></i></span>\n\t\t\t\t\t<span class="field-error" ng-show="loginForm.email.$dirty && loginForm.email.$invalid"><i class="ion-close-circled"></i></span>\n\t\t\t\t</label>\n\t\t\t\t<input type="text" class="form__control" name="email" placeholder="{{\'LOGIN.FORM.EMAIL\' | translate}}" ng-model="user.email" required>\n\t\t\t\t<span class="field-error-message" ng-show="loginForm.email.$dirty && loginForm.email.$invalid">{{\'LOGIN.FORM.EMAIL_ERROR\' | translate}}</span>\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<label><span>{{\'LOGIN.FORM.PASSWORD\' | translate}} </span>\n\t\t\t\t\t<span class="field-required" ng-show="loginForm.password.$pristine">*</span>\n\t\t\t\t\t<span class="field-valid" ng-show="loginForm.password.$dirty && loginForm.password.$valid"><i class="ion-checkmark-circled success"></i></span>\n\t\t\t\t\t<span class="field-error" ng-show="loginForm.password.$dirty && loginForm.password.$invalid"><i class="ion-close-circled"></i></span>\n\t\t\t\t</label>\n\t\t\t\t<input type="password" class="form__control" name="password" placeholder="{{\'LOGIN.FORM.PASSWORD\' | translate}}" ng-model="user.password" required>\n\t\t\t\t<span class="field-error-message" ng-show="loginForm.password.$dirty && loginForm.password.$invalid">{{\'LOGIN.FORM.PASSWORD_ERROR\' | translate}}</span>\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<button type="submit" class="button button--primary">{{\'LOGIN.FORM.LOGIN\' | translate}}</button>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</div>\n'),e.put("/partials/public/auth/register.html",'<div id="canvas-background" class="canvas-background">\n\t<canvas id="demo-canvas"></canvas>\n</div>\n<div class="centre-screen">\n\t<div class="container">\n\t\t<form name="registerForm" class="boxed" role="form" method="POST" ng-submit="register(registerForm.$valid, user)" novalidate>\n\t\t\t<h1>{{appName}} {{\'REGISTER.SUBHEADER\' | translate}}</h1>\n\t\t\t<ul ng-show="errors" class="alert alert-error"><li ng-repeat="error in errors">{{error}}</li></ul>\n\t\t\t<div class="form-group">\n\t\t\t\t<label><span>{{\'LOGIN.FORM.EMAIL\' | translate}} </span>\n\t\t\t\t\t<span class="field-required" ng-show="registerForm.email.$pristine">*</span>\n\t\t\t\t\t<span class="field-valid"  ng-show="registerForm.email.$dirty && registerForm.email.$valid"><i class="ion-checkmark-circled success"></i></span>\n\t\t\t\t\t<span class="field-error" ng-show="registerForm.email.$dirty && registerForm.email.$invalid"><i class="ion-close-circled"></i></span>\n\t\t\t\t</label>\n\t\t\t\t<input type="text" class="form__control" name="email" placeholder="{{\'LOGIN.FORM.EMAIL\' | translate}}" ng-model="user.email" required>\n\t\t\t\t<span class="field-error-message" ng-show="registerForm.email.$dirty && registerForm.email.$invalid">{{\'LOGIN.FORM.EMAIL_ERROR\' | translate}}</span>\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<label><span>{{\'LOGIN.FORM.PASSWORD\' | translate}} </span>\n\t\t\t\t\t<span class="field-required" ng-show="registerForm.password.$pristine">*</span>\n\t\t\t\t\t<span class="field-valid" ng-show="registerForm.password.$dirty && registerForm.password.$valid"><i class="ion-checkmark-circled success"></i></span>\n\t\t\t\t\t<span class="field-error" ng-show="registerForm.password.$dirty && registerForm.password.$invalid"><i class="ion-close-circled"></i></span>\n\t\t\t\t</label>\n\t\t\t\t<input type="password" class="form__control" name="password" placeholder="{{\'LOGIN.FORM.PASSWORD\' | translate}}" ng-model="user.password" required>\n\t\t\t\t<span class="field-error-message" ng-show="registerForm.password.$dirty && registerForm.password.$invalid">{{\'LOGIN.FORM.PASSWORD_ERROR\' | translate}}</span>\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<button type="submit" class="button button--primary">{{\'REGISTER.FORM.REGISTER\' | translate}}</button>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</div>\n'),e.put("/partials/private/dashboard/chat.html","<chat></chat>\n"),e.put("/partials/private/directives/chat.html",'<div class="chat-container clearfix">\n\n    <div class="chat">\n        <div class="chat-header clearfix">\n            <img src="/_img/tinka.png" alt="avatar" />\n\n            <div class="chat-about">\n                <div class="chat-with">Chat with Bot</div>\n                <div class="chat-num-messages">Bot Testing</div>\n            </div>\n        </div>\n        <!-- end chat-header -->\n\n        <div class="chat-history">\n\n            <ul id="chat-history">\n\n                <li ng-repeat="item in messages track by item.id">\n\n                    <div ng-if="item.isSelf">\n                        <div class="message-data align-right">\n                            <span class="message-data-time">{{item.time}}</span> &nbsp; &nbsp;\n                            <span class="message-data-name">You</span>\n                        </div>\n                        <div class="message other-message">\n                            {{item.message}}\n                        </div>\n                    </div>\n                    <div ng-if="!item.isSelf">\n                        <div class="message-data" ng-if="!item.isSelf">\n                            <span class="message-data-name">Bot</span>\n                            <span class="message-data-time">{{item.time}}</span>\n                        </div>\n                        <div class="message my-message {{item.type}}">\n                            <div ng-if="item.type == \'text\'">\n                                {{item.message}}\n                            </div>\n                            <div ng-if="item.type == \'image\'">\n                                <img src="{{item.message}}" alt="">\n                            </div>\n\n                            <div ng-if="item.type == \'generic\'">\n                                <div ng-repeat="card in item.message" class="chat-card">\n                                    <img ng-src="{{card.image_url}}" alt="" ng-show="card.image_url">\n                                    <div class="content">\n                                        <h2>{{card.title}}</h2>\n                                        <span>{{card.subtitle}}</span>\n                                        <div ng-repeat="button in card.buttons" class="button--container">\n                                            <button type="button" class="button button--secondary" ng-click="processButton(button)">{{button.title}}</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div ng-if="item.type == \'message-button\'">\n                                {{item.message}}\n                                <div class="content">\n                                    <div ng-repeat="button in item.result.buttons" class="button--container">\n                                        <button type="button" class="button button--white-outline" ng-click="processButton(button)">{{button.title}}</button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div ng-if="item.type == \'list\'">\n                                <div ng-repeat="row in item.payload.elements" class="chat-list">\n                                    <div class="content">\n                                        <h2>{{row.title}}</h2>\n                                        <span>{{row.subtitle}}</span>\n                                        <div ng-repeat="button in row.buttons" class="chat-list-button">\n                                            <button type="button" class="button button--primary-outline" ng-click="processButton(button)">{{button.title}}</button>\n                                        </div>\n                                    </div>\n                                    <div class="list-image">\n                                        <img ng-src="{{row.image_url}}" alt="" ng-show="row.image_url">\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                        <span class="meta" ng-if="item.result.response">\n                            <span>Detected Tone:\n                                <span class="emotion-dot {{item.remotion}}"></span> {{item.emotion || \'neutral\'}} | </span> <a href="" ng-click="retrain(item.result)">view details or re-train answer</a></span>\n                    </div>\n                </li>\n                <li id="loader">\n                    <div class="message-data" ng-if="!item.isSelf">\n                        <span class="message-data-name">Bot</span>\n                        <span class="message-data-time">{{item.time}}</span>\n                    </div>\n                    <div class="message my-message with-loading">\n                        <div class="loading">\n                            <span></span>\n                        </div>\n                    </div>\n                </li>\n\n            </ul>\n\n        </div>\n        <!-- end chat-history -->\n\n        <div class="chat-message clearfix">\n            <textarea name="message-to-send" id="message-to-send" placeholder="Type your message" rows="1" ng-model="message"></textarea>\n            <button>Send</button>\n\n        </div>\n        <!-- end chat-message -->\n\n    </div>\n    <!-- end chat -->\n\n</div>\n<!-- end container -->\n')}]),function(){function e(e){}e.$inject=["$scope"],angular.module("private").controller("private.404.controller",e).config(["$routeProvider",function(e){e.when("/404",{templateUrl:"/partials/404.html",controller:"private.404.controller"})}])}(),function(){function e(e){return{restrict:"A",transclude:!0,replace:!0,template:"<div ng-transclude ng-show='show'></div>",scope:{show:"@"},link:function(t,n,a){function o(e){el=e[0];var t=el.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.top<(window.innerHeight||document.documentElement.clientHeight)}angular.element(e).bind("scroll",function(){o(n)&&!t.show&&(t.show=!0),t.$apply()})}}}e.$inject=["$window"],angular.module("common").directive("animator",e)}(),function(e){function t(e,t,n){var a=function(){e.firstname?t.text(e.firstname.charAt(0)+e.lastname.charAt(0)):t.text("ME")};a()}function n(){return{restrict:"E",controller:"avatar.directive.controller",scope:{firstname:"=",lastname:"=",userid:"="}}}t.$inject=["$scope","$element","authService"],angular.module("common").directive("avatar",n).controller("avatar.directive.controller",t)}(),function(){function e(e,t,n,a,o,r){function s(e,t,n,a,s){var i,l,c=o.path();n.stopPropagation(),a?(i="/"==c?"create":"/create",l="/"==c?"create":"/create",o.path(c+(a?i:l))):(e+=t.id?"/"+t.id:"",e.indexOf("#/")>-1?o.path(e.replace("#","")):"/"==c?(r.send("send-application-title",t),o.path(e)):o.path(c+e))}function i(e){e.preventDefault(),e.stopPropagation()}e.perPage=15,e.showLoader=!0,e.sortBy=e.title,e.listData=[],e.gotoLocation=s,e.openMenu=i,a.innerHeight>800&&(e.perPage=14),a.innerHeight>900&&(e.perPage=14);var l=function(){e.showLoader=!1};e.$watch("cardData",function(t,n){t!==n&&(e.cardData=t,l())})}function t(){return{restrict:"E",scope:{cardData:"=ngModel",title:"@title",description:"@description",link:"@link",name:"@name",created:"@created"},templateUrl:"/partials/private/directives/card-list.html",controller:"directives.card-list.controller"}}e.$inject=["$scope","$element","$rootScope","$window","$location","eventService"],angular.module("common").directive("cardList",t).controller("directives.card-list.controller",e)}(),function(){function e(e,t,n,a,o,r){function s(t){t.url&&window.open(t.url),t.payload&&(e.messages.push({id:e.messages.length,message:t.payload,isSelf:!0,type:"user"}),m(t.payload))}function i(t){document.getElementById("loader").style.display="block",e.loading=!0,n(function(){document.getElementById("loader").style.display="none",e.loading=!1;var n;t.answer.attachment&&t.answer.attachment.payload&&(n=t.answer.attachment.payload),e.messages.push({id:e.messages.length,message:t.answer.text,isSelf:!1,result:t,type:t.type,payload:n}),e.finished()},10)}function l(e){var t=0,n="joy";if(e.answer.tone="joy",e.answer.emotions){for(var a in e.answer.emotions.emotions)e.answer.emotions.emotions[a]>t&&(t=e.answer.emotions.emotions[a],n=a);e.answer.tone=n}return e}function c(e){return e.answer.speech&&(e.answer.text=e.answer.speech),e.answer.emotions&&e.answer.emotions.speech&&(e.answer.text=e.answer.emotions.speech),e.answer.attachment&&(e.type=e.answer.attachment.type,"image"===e.type&&(e.answer.text=e.answer.attachment.payload.url),"template"===e.type&&(e.type=e.answer.attachment.payload.template_type,"generic"===e.type&&(e.answer.text=e.answer.attachment.payload.elements),"button"===e.type&&(e.type="message-button",e.answer.text=e.answer.attachment.payload.text,e.buttons=e.answer.attachment.payload.buttons))),e.answer.quick_replies&&(e.buttons=e.answer.quick_replies,e.type="message-button"),e}function d(e){return e.question&&e.question.sessionId?g=e.question.sessionId:e.session_id&&(g=e.session_id),e}function u(e){e=c(e),e=d(e),e.answer.emotions&&(e=l(e)),i(e)}function m(t){var n=!0;(e.message.length>0||t)&&(t||(n=!1,t=e.message),e.message="",n||e.messages.push({id:e.messages.length,message:t,isSelf:!0,type:"user"}),e.finished(),h.emit("message",{message:t,sessionId:g}))}function p(e){o.showModal({templateUrl:"/partials/private/directives/models/retrain.html",controller:"directives.modals.retrain.controller",inputs:{item:e}}).then(function(e){e.close.then(function(e){})})}e.message="",e.messages=[],e.retrain=p,e.loading=!1,e.processButton=s,e.sendMessage=m;var g,f=document.getElementById("chat-history"),h=(document.getElementById("loader"),io());e.bot={name:"Bot",id:"bot",description:"This is the bot framework",welcome:"Hi I'm botty,",active:!0,message:[]},e.finished=function(){n(function(){f.scrollTop=f.scrollHeight-f.clientHeight})},h.on("response",function(e){e&&(e.type="text",e.answer&&"string"==typeof e.answer&&(e.answer=JSON.parse(e.answer)),e.response&&"string"==typeof e.response&&(e.response=JSON.parse(e.response)),u(e))}),document.getElementById("message-to-send").onkeypress=function(t){13===t.which&&(t.preventDefault(),e.sendMessage(),e.$apply())},i({answer:{text:e.bot.welcome},type:"text"})}function t(){return{restrict:"E",templateUrl:"/partials/private/directives/chat.html",controller:"chat.directive.controller"}}e.$inject=["$scope","$element","$timeout","apiService","ModalService","notificationService"],angular.module("common").directive("chat",t).controller("chat.directive.controller",e)}(),function(){function e(){return{restrict:"A",link:function(e,t,n){t.bind("click",function(e){t.toggleClass("active")})}}}angular.module("common").directive("dropdown",e)}(),function(e){e.controller("directives.headerbar.private.controller",["$scope","$element","$window","$location","apiService","authService","eventService","ngNotify",function(e,t,n,a,o,r,s,i){e.menuOpen=!1,e.applicationOpen=!1,e.showNav=!1,e.user=r.isAuthenticated(),e.brand=!1,a.path().indexOf("software")>-1&&(e.brand="software"),a.path().indexOf("filament")>-1&&(e.brand="filament"),e.getClass=function(e){return"/"==e?"/"===a.path()?"active":"":a.path().indexOf(e)>-1?"active":""},e.logout=function(){r.deAuthenticate(),window.location="/"}}]),e.directive("headerBarPrivate",function(){return{restrict:"E",templateUrl:"/partials/chrome/header-bar-private.html",controller:"directives.headerbar.private.controller"}})}(angular.module("common")),function(e){e.controller("directives.headerbar.public.controller",["$scope","$element","$rootScope","$location","$window",function(e,t,n,a,o){e.menuOpen=!1;var r=!1;e.slideDown&&angular.element(o).bind("scroll",function(){o.scrollY>200&&!r?(t.addClass("affix"),r=!0):r&&o.scrollY<=10&&(r=!1,t.removeClass("affix"))}),e.brand=!1,a.path().indexOf("software")>-1&&(e.brand="Software One"),a.path().indexOf("filament")>-1&&(e.brand="filament"),e.getClass=function(e){return a.path().substr(0,e.length)===e?"active":""}}]),e.directive("headerBarPublic",function(){return{restrict:"E",scope:{slideDown:"@slideDown"},templateUrl:"/partials/chrome/header-bar-public.html",controller:"directives.headerbar.public.controller"}})}(angular.module("common")),function(e){e.directive("match",["$parse",function(e){return{require:"ngModel",link:function(e,t,n,a){var o=t.inheritedData("$formController")[n.match];a.$parsers.push(function(e){return e===o.$viewValue?(a.$setValidity("match",!0),e):void a.$setValidity("match",!1)}),o.$parsers.push(function(e){return a.$setValidity("match",e===a.$viewValue),e})}}}])}(angular.module("common")),function(e){e.controller("directives.progressbar.controller",["$scope","$element","$rootScope",function(e,t,n){e.progressValue=0,e["class"]="success";var a=100*e.used/e.total;e.reverse&&(e["class"]="danger"),a>60&&(e["class"]="warning"),a>80&&(e["class"]=e.reverse?"success":"danger"),e.progressValue=a}]),e.directive("progressBar",function(){return{restrict:"E",templateUrl:"/partials/private/directives/progressbar.html",controller:"directives.progressbar.controller",scope:{total:"@total",used:"@used",reverse:"@reverse"}}})}(angular.module("common")),function(e){e.directive("toggleClass",function(){return{restrict:"A",link:function(e,t,n){t.bind("click",function(e){e.stopPropagation(),t.hasClass(n.toggleClass)&&n.removeSelf?t.removeClass(n.toggleClass):t.hasClass("active")||(t.parent().parent().find("a").removeClass(n.toggleClass),t.toggleClass(n.toggleClass))})}}})}(angular.module("common")),function(e){function t(e,t,a,o){var r="/api",s=function(e){var t,n={login:"/auth/login",logout:"/auth/logout",register:"/auth/register",message:"/web/message",totals:"/analytics/totals/{from_date}/{to_date}",channels:"/analytics/channels/{from_date}/{to_date}",messages:"/analytics/messages/{from_date}/{to_date}",messages_paged:"/analytics/messages/{from_date}/{to_date}/{count}/{page}",messages_paged_sorted:"/analytics/messages/{from_date}/{to_date}/{count}/{page}/{sort}/{direction}",unanswered_paged:"/analytics/messages/unanswered/{from_date}/{to_date}/{count}/{page}",unanswered_paged_sorted:"/analytics/messages/unanswered/{from_date}/{to_date}/{count}/{page}/{sort}/{direction}",flagged:"/analytics/messages/flagged/{from_date}/{to_date}/{count}/{page}",flagged_paged_sorted:"/analytics/messages/flagged/{from_date}/{to_date}/{count}/{page}/{sort}/{direction}",intent_percentage:"/analytics/intents/{from_date}/{to_date}",intents:"/training/intents",intent:"/training/intent/{id}",conversations:"/analytics/conversations/{from_date}/{to_date}",conversations_paged:"/analytics/conversations/{from_date}/{to_date}/{count}/{page}",conversations_paged_sorted:"/analytics/conversations/{from_date}/{to_date}/{count}/{page}/{sort}/{direction}",conversation:"/analytics/conversations/{id}/messages",emotion:"/training/emotion/{id}",settings:"/config"};if(t=n[e.toLowerCase()]||!1,!t)throw new Error("Invalid API endpoint, Remember to add new endpoints to api.js getEndpoint function. Endpoint: "+e);return t},i=function(){return"undefined"!=typeof Storage},l=function(e,t){var n,a=e.split("."),o=a.length,r=t||this;for(n=0;n<o;n++)r=r[a[n]];return r},c=function(e,t){var n=/{(.*?)}/g,a=e.match(n);if(!t)return e=e.replace(/{{.*?}}/g,"").replace(/\/\//g,"/");if(a&&a.length)for(var o=0,r=a.length;o<r;o++)e=e.replace(new RegExp(a[o],"g"),l(a[o].replace(/{|}/g,""),t));if(e.indexOf("{")>-1)throw new Error("You seem to be missing an expected property on this endpoint. Ensure you have the follow:",a);return e},d=function(e,t){var n={};for(var a in t)e.indexOf(a)===-1&&(n[a]=t[a]);return n},u=function(e,t){e=e.toLowerCase();var n=t?localStorage:sessionStorage;return JSON.parse(n.getItem(e))},m=function(e,t,n){e=e.toLowerCase();var a=n?localStorage:sessionStorage;a.setItem(e,t===Object(t)?JSON.stringify(t):t)};this.getFormattedUrl=function(e,t){e=s(e);d(e,t);return e=c(e,t),r+e},this.upload=function(t,n,o){var i=e.defer();t=s(t),t=c(t,n);var l=o?t:r+t,d=a.post(l,n,{transformRequest:angular.identity,headers:{"Content-Type":void 0}});return d.success(function(e,t,n,a){200===t?i.resolve(e):i.reject(e)}).error(function(e,t,n,a){i.reject(e)}),i.promise},this.getRequest=function(t,n,l,p){var g=e.defer(),f=t+JSON.stringify(n);if(l&&i()){var h=u(f,p);if(h)return g.resolve(h),g.promise}t=s(t);var v=d(t,n);t=c(t,n);var E=a.get(r+t,{params:v});return o.start(),E.success(function(e,t,n,a){o.complete(),200===t&&(l&&i()&&e&&m(f,e,p),g.resolve(e))}).error(function(e,t,n,a){o.complete(),g.reject(e)}),g.promise},this.postRequest=function(t,n,i,l){var d=e.defer();t=s(t),t=c(t,n);var u=l?t:r+t,m=a.post(u,i);return o.start(),m.success(function(e,t,n,a){o.complete(),200===t?d.resolve(e):d.reject(e)}).error(function(e,t,n,a){o.complete(),d.reject(e)}),d.promise},this.putRequest=function(t,n,i){var l=e.defer();t=s(t),t=c(t,n);var d=a.put(r+t,i);return o.start(),d.success(function(e,t,n,a){o.complete(),200===t&&l.resolve(e)}).error(function(e,t,n,a){o.complete(),l.reject(e)}),l.promise},this.deleteRequest=function(t,n,i){var l=e.defer();t=s(t),t=c(t,n);var d=a["delete"](r+t);return o.start(),d.success(function(e,t,n,a){o.complete(),200===t&&l.resolve(e)}).error(function(e,t,n,a){o.complete(),l.reject(e)}),l.promise},this.mockGet=function(t,n,a,r){var i,l=e.defer(),u=t;t=s(t);d(t,n);return t=c(t,n),i=window.mocks[u],a?l.resolve(i):(o.start(),console.log("GET:: "+t),setTimeout(function(){o.complete(),l.resolve(i)},1e3)),l.promise},this.mockPost=function(t,n,a,r){var i=e.defer(),l=window.mocks[t];return t=s(t),t=c(t,n),o.start(),console.log("POST:: "+t),setTimeout(function(){o.complete(),i.resolve(l)},1e3),i.promise},this.mockPut=function(t,n,a){var r=e.defer(),i=window.mocks[t];return t=s(t),t=c(t,n),o.start(),console.log("PUT:: "+t),setTimeout(function(){o.complete(),r.resolve(i)},1e3),r.promise},this.mockDelete=function(t,n,a){var r=e.defer(),i=window.mocks[t];return t=s(t),t=c(t,n),o.start(),console.log("DELETE:: "+t),setTimeout(function(){o.complete(),r.resolve(i)},1e3),r.promise},this.get=n?this.mockGet:this.getRequest,this.put=n?this.mockPut:this.putRequest,this.post=n?this.mockPost:this.postRequest,this["delete"]=n?this.mockDelete:this.deleteRequest}t.$inject=["$q","$rootScope","$http","cfpLoadingBar"];var n=!1;angular.module("common").service("apiService",t)}(),function(){function e(e,t){var n=this;n.isAuthenticated=function(){return!!localStorage.getItem("isAuthenticated")&&JSON.parse(localStorage.getItem("isAuthenticated"))},n.authenticate=function(e){localStorage.setItem("isAuthenticated",!0),localStorage.setItem("user",JSON.stringify(e))},n.deAuthenticate=function(){sessionStorage.clear(),localStorage.clear(),localStorage.setItem("isAuthenticated",!1),localStorage.setItem("token",{}),localStorage.setItem("user",{})},n.getCurrentUser=function(){return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))}}e.$inject=["$rootScope","$window"],angular.module("common").service("authService",e)}(),function(){function e(e,t){function n(e,t,n){for(var a,o={labels:[],data:[[]]},r=-1,s=1,i=0;i<e.length;i++)a=moment(t.from,"YYYY-MM-DD").add(i,"days").format("MMM DD"),o.labels.push(a),o.data[0].push(e[i]),e[i]>r&&(r=e[i]),e[i]<s&&(s=e[i]);return o.high=r,o.low=s,o}function a(e,t){for(var n,a={labels:[],data:[[]]},o=-1,r=1,s=0,i=0;i<e.length;i++)i%7===0?(n="w/c "+moment(t.from,"YYYY-MM-DD").add(7*s,"days").format("MMM DD"),a.labels.push(n),a.data[0].push(e[i]),s++):a.data[0][s-1]=a.data[0][s-1]+e[i];for(var l=a.data[0].length-1;l>=0;l--)a.data[0][l]>o&&(o=a.data[0][l]),a.data[0][l]<r&&(r=a.data[0][l]);return a.high=o,a.low=r,a}function o(e,t){for(var n,a,o={labels:[],data:[[]]},r=-1,s=1,i=0,l=0;l<e.length;l++)n=moment(t.from,"YYYY-MM-DD").add(l,"days").format("MMM YYYY"),n===a?o.data[0][i-1]=o.data[0][i-1]+e[l]:(o.labels.push(n),o.data[0].push(e[l]),a=n,i++);for(var c=o.data[0].length-1;c>=0;c--)o.data[0][c]>r&&(r=o.data[0][c]),o.data[0][c]<s&&(s=o.data[0][c]);return o.high=r,o.low=s,o}function r(e,t){var r=[];if(e instanceof Array)r=e;else for(var s in e)r.push(e[s]);var i=r.length,l=[];return l=i<28?n(r,t):i<160?a(r,t):o(r,t)}this.formatActivityData=r}e.$inject=["$rootScope","$timeout"],angular.module("common").service("activityService",e)}(),function(){function e(e,t){this.send=function(n,a){t(function(){a=a||{},e.$emit(n,a)})},this.on=function(t,n,a){var o=e.$on(t,n);a&&a.$on("$destroy",o)}}e.$inject=["$rootScope","$timeout"],
angular.module("common").service("eventService",e)}(),function(){function e(e){this.set=function(t,n){e.set(t,n)},this.defaultError=function(){e.set("Opps, something went wrong","error")}}e.$inject=["ngNotify"],angular.module("common").service("notificationService",e)}(),function(){function e(e,t,n,a){return{requestError:function(t){return e.reject(t)},response:function(t){return t||e.when(t)},responseError:function(t){return t&&401===t.status,e.reject(t)}}}function t(e,t,n,a,o){return o.request=function(e){var t=n.isAuthenticated();return t||(a.location.href="/login"),e||$q.when(e)},o}function n(e,t,n,a){return a.request=function(e){var a=t.isAuthenticated();return a&&(n.location.href="/portal#/"),e||$q.when(e)},a}e.$inject=["$q","$location","authService","$window"],t.$inject=["$location","$rootScope","authService","$window","httpInterceptorCommon"],n.$inject=["$location","authService","$window","httpInterceptorCommon"],angular.module("common").factory("httpInterceptorCommon",e).factory("httpInterceptorPrivate",t).factory("httpInterceptorPublic",n)}(),function(){function e(){}angular.module("private").controller("private.dashboard.chat.controller",e).config(["$routeProvider",function(e){e.when("/",{templateUrl:"/partials/private/dashboard/chat.html",controller:"private.dashboard.chat.controller"}).when("/console",{templateUrl:"/partials/private/dashboard/chat.html",controller:"private.dashboard.chat.controller"})}])}(),function(){function e(e,t,n,a,o,r){function s(o,s){e.errors=null,o&&t.post("login",null,s).then(function(e){e?(a.authenticate(e),n.location="/portal#/"):r.set("Incorrect username or password","error")},function(e){r.set("Incorrect username or password","error")})}e.user={},e.login=s}e.$inject=["$scope","apiService","$window","authService","$timeout","notificationService"],angular.module("public").controller("public.login.controller",e).config(["$routeProvider",function(e){e.when("/",{templateUrl:"/partials/public/auth/login.html",controller:"public.login.controller"}).when("/login",{templateUrl:"/partials/public/auth/login.html",controller:"public.login.controller"})}])}(),function(){function e(e,t,n,a,o,r){function s(o,s){e.errors=null,o&&t.post("register",null,s).then(function(e){e?(a.authenticate(e),n.location="/portal#/"):r.set("Incorrect username or password","error")},function(e){r.set("Incorrect username or password","error")})}e.user={},e.register=s}e.$inject=["$scope","apiService","$window","authService","$timeout","notificationService"],angular.module("public").controller("public.register.controller",e).config(["$routeProvider",function(e){e.when("/register",{templateUrl:"/partials/public/auth/register.html",controller:"public.register.controller"})}])}();